<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>MT5 SNIPER FINAL</title>
<script src="https://unpkg.com/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js"></script>
<style>
body{margin:0;background:#000;color:#0f0;font-family:monospace}
#top{display:flex;gap:5px;padding:6px;background:#111;border-bottom:2px solid #0f0}
.box{flex:1;border:1px solid #0f0;padding:6px;text-align:center;font-weight:bold}
#status{padding:8px;text-align:center;background:#222}
#wrap{height:calc(100vh - 90px);display:grid;grid-template-rows:1fr 1fr}
.chart{border-top:1px solid #222}
</style>
</head>
<body>

<div id="top">
  <div class="box">BTCUSD Â· MT5 REAL</div>
  <div class="box">GALAK + SAFETY</div>
</div>

<div id="status">WAITING WS...</div>

<div id="wrap">
  <div id="c1" class="chart"></div>
  <div id="c5" class="chart"></div>
</div>

<script>
// ===== GANTI URL INI SAJA =====
const WS_URL = "wss://mt5ws.yourname.workers.dev";

const status = document.getElementById("status");

// CHART
const c1 = LightweightCharts.createChart(c1,{layout:{background:{color:"#000"},textColor:"#0f0"}});
const s1 = c1.addCandlestickSeries();
const c5 = LightweightCharts.createChart(c5,{layout:{background:{color:"#000"},textColor:"#0f0"}});
const s5 = c5.addCandlestickSeries();

// ANDROID FIX
setTimeout(()=>{c1.timeScale().fitContent();c5.timeScale().fitContent();},500);

// SEED
const t=Math.floor(Date.now()/1000);
s1.setData([{time:t-60,open:1,high:1,low:1,close:1}]);
s5.setData([{time:t-60,open:1,high:1,low:1,close:1}]);

// WS
const ws = new WebSocket(WS_URL);

ws.onopen = ()=>status.innerText="MT5 FEED CONNECTED";
ws.onclose = ()=>status.innerText="WS CLOSED";
ws.onerror = ()=>status.innerText="WS ERROR";

ws.onmessage = e=>{
  const d = JSON.parse(e.data);
  const now=Math.floor(Date.now()/1000);
  if(d.m1) s1.update({time:now,open:d.m1.o,high:d.m1.h,low:d.m1.l,close:d.m1.c});
  if(d.m5) s5.update({time:now,open:d.m5.o,high:d.m5.h,low:d.m5.l,close:d.m5.c});
};
</script>
</body>
</html>
